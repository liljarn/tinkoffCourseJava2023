package edu.hw6.task5;

import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;
import org.junit.jupiter.params.ParameterizedTest;
import org.junit.jupiter.params.provider.Arguments;
import org.junit.jupiter.params.provider.MethodSource;
import java.util.stream.Stream;
import static edu.hw6.task5.HackerNews.hackerNewsTopStories;
import static edu.hw6.task5.HackerNews.news;
import static org.assertj.core.api.Assertions.assertThat;

public class HackerNewsTest {
    private final long[]
        newsNums =
        {38257794L, 38257094L, 38252566L, 38256137L, 38257284L, 38248497L, 38256810L, 38251957L, 38258406L, 38258101L,
            38250913L,
            38251842L, 38257499L, 38249742L, 38251330L, 38249708L, 38252947L, 38249515L, 38248752L, 38257049L,
            38256478L,
            38249587L, 38252449L, 38250001L, 38257813L, 38254353L, 38252963L, 38250114L, 38251935L, 38251032L,
            38249214L,
            38254153L, 38253384L, 38248532L, 38248422L, 38254835L, 38248421L, 38256645L, 38256577L, 38254656L,
            38247964L,
            38255004L, 38255230L, 38247234L, 38254386L, 38255884L, 38245542L, 38249473L, 38248900L, 38258129L,
            38243949L,
            38249404L, 38256392L, 38252597L, 38248681L, 38248292L, 38256620L, 38249616L, 38251154L, 38255923L,
            38258240L,
            38253130L, 38251002L, 38242946L, 38249664L, 38255496L, 38258015L, 38246226L, 38245198L, 38231160L,
            38253425L,
            38247767L, 38248617L, 38257024L, 38245935L, 38249069L, 38237230L, 38228310L, 38256558L, 38232767L,
            38236128L,
            38256516L, 38257816L, 38249730L, 38255157L, 38230161L, 38254291L, 38255692L, 38229998L, 38251500L,
            38257769L,
            38258381L, 38254866L, 38252360L, 38228320L, 38236198L, 38257182L, 38246413L, 38249394L, 38230532L,
            38246668L,
            38247561L, 38250101L, 38249527L, 38246032L, 38256166L, 38229231L, 38240333L, 38256509L, 38247423L,
            38249130L,
            38253406L, 38241674L, 38246082L, 38255001L, 38248371L, 38247339L, 38238658L, 38255404L, 38241235L,
            38252492L,
            38245762L, 38256707L, 38244473L, 38256694L, 38255056L, 38226057L, 38232243L, 38241304L, 38245240L,
            38250372L,
            38257637L, 38244927L, 38256399L, 38241583L, 38253414L, 38249820L, 38230141L, 38251028L, 38250404L,
            38255168L,
            38230516L, 38226526L, 38250731L, 38250284L, 38226743L, 38239211L, 38255892L, 38254719L, 38238796L,
            38258078L,
            38255834L, 38228788L, 38257457L, 38253699L, 38253825L, 38236684L, 38238180L, 38229398L, 38237696L,
            38256951L,
            38226030L, 38224245L, 38249938L, 38247478L, 38239728L, 38221552L, 38239503L, 38252565L, 38250602L,
            38250382L,
            38242343L, 38254040L, 38244947L, 38252434L, 38240861L, 38251382L, 38230476L, 38242105L, 38226799L,
            38223019L,
            38254589L, 38239358L, 38243060L, 38231771L, 38230325L, 38238707L, 38242086L, 38226891L, 38226833L,
            38247788L,
            38227486L, 38254080L, 38226340L, 38233938L, 38239585L, 38247543L, 38253937L, 38231670L, 38253749L,
            38235407L,
            38231704L, 38253521L, 38225132L, 38245100L, 38242992L, 38251715L, 38253364L, 38223660L, 38249366L,
            38227324L,
            38225172L, 38251841L, 38250394L, 38225150L, 38249204L, 38228481L, 38227544L, 38242160L, 38223822L,
            38251101L,
            38245665L, 38228114L, 38243806L, 38240370L, 38234653L, 38247363L, 38222818L, 38230453L, 38235745L,
            38236607L,
            38252233L, 38237442L, 38249138L, 38220336L, 38243341L, 38240689L, 38245187L, 38221379L, 38247246L,
            38243230L,
            38234383L, 38221709L, 38231901L, 38224810L, 38251366L, 38248005L, 38228592L, 38251864L, 38235465L,
            38223555L,
            38236155L, 38234387L, 38234319L, 38247305L, 38249316L, 38234705L, 38226589L, 38220288L, 38227886L,
            38220892L,
            38224920L, 38222959L, 38240421L, 38240278L, 38248291L, 38253582L, 38235874L, 38222424L, 38257000L,
            38228074L,
            38221157L, 38247357L, 38231151L, 38224033L, 38239286L, 38239266L, 38226402L, 38225724L, 38241237L,
            38239735L,
            38248077L, 38240494L, 38228122L, 38230449L, 38239542L, 38249582L, 38240175L, 38227437L, 38239252L,
            38239422L,
            38222900L, 38234120L, 38227428L, 38249367L, 38230316L, 38240089L, 38238301L, 38230730L, 38232998L,
            38249194L,
            38242536L, 38222909L, 38224117L, 38240386L, 38239629L, 38232378L, 38234564L, 38226291L, 38232914L,
            38234580L,
            38254258L, 38242233L, 38242518L, 38227451L, 38240147L, 38248705L, 38255079L, 38239453L, 38225121L,
            38253146L,
            38240658L, 38231390L, 38233568L, 38242758L, 38223857L, 38227565L, 38235102L, 38222277L, 38251076L,
            38222596L,
            38239640L, 38244289L, 38242510L, 38221996L, 38243702L, 38220982L, 38233157L, 38228039L, 38228470L,
            38226567L,
            38237472L, 38240212L, 38227112L, 38229928L, 38234305L, 38229041L, 38233905L, 38249755L, 38231601L,
            38230495L,
            38242445L, 38243540L, 38220607L, 38240221L, 38236512L, 38237848L, 38224217L, 38228672L, 38239776L,
            38224950L,
            38222014L, 38224085L, 38236857L, 38232397L, 38247300L, 38225019L, 38232006L, 38232920L, 38247383L,
            38223771L,
            38222973L, 38230750L, 38257141L, 38235124L, 38225285L, 38229001L, 38231320L, 38236689L, 38234325L,
            38244532L,
            38237180L, 38242980L, 38228709L, 38241697L, 38226404L, 38231626L, 38232334L, 38233812L, 38228649L,
            38223028L,
            38252172L, 38240319L, 38240363L, 38228033L, 38243125L, 38234326L, 38230579L, 38221121L, 38235615L,
            38230417L,
            38229576L, 38242586L, 38220200L, 38235116L, 38232930L, 38232438L, 38226103L, 38241877L, 38234057L,
            38234230L,
            38222490L, 38224744L, 38237733L, 38225640L, 38225424L, 38246624L, 38237366L, 38230008L, 38233820L,
            38229843L,
            38234716L, 38230904L, 38222616L, 38236209L, 38238123L, 38225520L, 38234896L, 38238674L, 38227329L,
            38233281L,
            38223149L, 38233902L, 38254086L, 38227168L, 38225768L, 38234689L, 38242244L, 38242718L, 38242664L,
            38220713L,
            38230626L, 38244149L, 38231656L, 38237730L, 38221671L, 38229102L, 38236168L, 38238204L, 38240821L,
            38228861L,
            38226199L, 38227711L, 38226430L, 38220444L, 38244320L, 38228007L, 38232572L, 38252215L, 38239440L,
            38221370L,
            38230494L, 38223048L, 38228556L, 38227321L, 38233934L, 38220633L, 38226609L, 38230120L, 38228514L,
            38236519L,
            38253715L, 38244703L, 38231564L, 38232234L, 38235192L, 38239896L, 38231781L, 38234367L, 38229716L,
            38239036L,
            38246439L, 38237287L, 38228265L, 38227582L, 38237241L, 38231641L, 38240402L, 38226815L, 38220917L,
            38229377L,
            38227043L, 38222243L, 38233193L, 38221051L, 38234473L, 38238824L, 38226217L, 38234356L, 38233773L};

    @Test
    @DisplayName("hackerNewsTopStories method test")
    public void hackerNewsTopStories_shouldReturnLongArrayOfNumsFromJson() {
        assertThat(hackerNewsTopStories()).containsOnly(newsNums);
    }

    private static Stream<Arguments> newsForTest() {
        return Stream.of(
            Arguments.of(37570037L, "JDK 21 Release Notes"),
            Arguments.of(38233773L, "Installing OpenBSD on the Fastest iMac G3 [video]"),
            Arguments.of(38234689L, "A Rusty CHERI â€“ The path to hardware capabilities in Rust [video]"),
            Arguments.of(38250284L, "Connections with James Burke is back"),
            Arguments.of(38222909L, "The Unix timestamp will begin with 17 this Tuesday")
        );
    }

    @ParameterizedTest
    @MethodSource("newsForTest")
    @DisplayName("news method test")
    public void news_shouldReturnStringOfTitleOfNewsFromJson(long id, String title) {
        assertThat(news(id)).isEqualTo(title);
    }
}
